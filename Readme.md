Установка модуля:

Для запуска моего приложения вам потребуется магазин  cscart_v4.15.1.SP2, скачайте и установите на свой магазин следующие файлы из моего репозитория: https://github.com/RedHat73/stschool2/pull/6

Вы можете просматеть код и скачать его себе или загрузить архив мода SD_departments.zip из данной ветки  и распоковать его в своем магазине. Для того, чтобы вы увидели новую сущность “Отделы”, теперь потребуется установить мод в магазине, для этого перейдите по пути: Модули->Управления модулями->CS-Cart. В открывшемся окне, справой стороны в меню поиска модулей разработчика настройте поиск по всем разработчикам, сняв все имеющиеся там галочки и нажмите “Найти”. В списке модулей найдите модуль с именем “Simtech Development: Отделы” и нажмите кнопку “Установить”, а затем можно сразу же перейти в “Отделы” нажав на месте кнопки “Установить”, кнопку “Открыть”.

Модуль уже может функционировать и вы можете приступать к его заполнению списками отделов. Так же вы можете воспользоваться для демо базой данных находящийся по пути var/backups/cscart_development.sql

Возможности модуля:

При переходе в меню Покупатели > Отделы  отображаться интерфейс управления отделами. Основные функции:
    Модуль языкозависим. Языкозависимость на двух языках: En, Ru
    Возможность удалить отдел;
    Возможность перейти на страницу создания отдела;
    Возможность перейти на страницу редактирования отдела;
    Возможность поменять статус отдела;
    Возможность поиска по статусу отдела и названию отдела;
    Возможность сортировки по полям таблицы (название, статус, дата создания);
    Паджинация (отображается при условии нахождения в списке более 10 отделов);
При создании нового отдела доступны следующие поля:
    Логотип (изображение);
    Название (языкозависимая переменная);
    Описание (языкозависимая переменная);

    Руководитель (пользователь, задается пикером пользователей, можно выбрать только одного пользователя из списка зарегистрированных, как покупатель).

    Сотрудники (пользователи, задается пикером пользователей, выбирается из списка зарегистрированных покупателей)

    Статус отдела (Вкл./выкл/Скрыть)

При редактировании отдела доступны поля аналогичные созданию нового отдела. Дополнительно можно удалить отдел из карточки редактирования.

В витрине магазина по пути My Account->Отделы доступна новая страница списка отделов.

    На списке отделов в витрине отображаются следующие поля отдела:
        логотип - по клику переход на карточку отдела;
        название отдела - по клику переход на карточку отдела;
        фамилия и имя руководителя;

    На списке отделов должна также присутствует паджинация, а также отображаться только отделы со статусом Вкл.

    Карточку отдела в витрина сделана по аналогии со страницей бренда с допущением, что список сотрудников отдела выводится по принципу списка Заказов.

Тест-кейс

Предусловия:

1. Есть тестовый магазин с установленной модификацией;
2. Тестовый пользователь с правами администратора, логин и пароль.
3. Тестовый пользователь с правами покупателя, логин и пароль.
4.  Для тестового пользователя в панели администратора создан отдел.

Действия:

1. Заходим на главную страницу магазина;
2. Вправом верхнем углу нажать "Мой профиль";
3. Нажать на кнопку "Войти";
4. Ввести логин и пароль для тестового пользователя с правами администратора;
5. Нажать "Войти";
6. Внижу нажать "Панель администратора";
7. Нажать вверху в меню навигации "Покупатели";
8. Выбрать из выпавшего списка "Отделы";
9. В правом верхнем углу нажать на значок "+" - Добавить отдел;
10. Ввести название отдела заполнив поле "Название";
11. Ниже нажать на кнопку "+Добавить пользователей";
12. Из списка выбрать одного пользователя, тем самым выбрав руководителя отдела;
13. Нажать на кнопку "Выбрать";
14. Еще ниже справа нажать на кнопку "Добавить пользвателей";
15. Из списка выбрать несколько пользователей, тем самым выбрав сотрудников отдела;
16. Нажать на кнопку "Добавить пользователей и закрыть";
17. Оставшиеся пустые поля заполняются по желанию;
18. В правом верхнем углу нажать на кнопку "Создать";
19. Для удаления отдела из списка отделов, можно воспользоваться тремя способами:
    19.1.1 Наведите курсором мышки на отдел который хотите удалить
    19.1.2 Нажмите значек "Шестеренка" на строке отдела, который хотите удалить.
    19.1.3. Нажмите на надпись "Удалить"

    19.2.1.1. Нажмите на картинку отдела или на название отдела, для перехода в меню редактирования отдела.
    19.2.1.2.1. Наведите курсором мышки на отдел который хотите редактировать
    19.2.1.2.2 Нажмите значек "Шестеренка" на строке отдела, который хотите редактировать.
    19.2.1.2.3. Нажмите на надпись "Редактировать".
    19.2.2. На экране изменения отдела, вверхнем правом углу нажмите на значек "Шестеренки".
    19.2.3. Нажмите на надпись "Удалить".

    19.3.1 На экране списков отделов, которые хотите удалить, нажмите на пустое место строки отдела  для её выбора. Можно выбрать массово.
    19.3.2. Вверхнем правом углу нажмите на значок "Шестеренки".
    19.3.3. Нажмите на надпись "Удалить".

20. Внижмем левом углу экрана нажмите "Витрина".
21. Вверхнем правом углу экрана нажмите "Мой профиль".
22. Из выпавшего списка, нажмите на надпись "Отделы".
23. Из отображенного плиткой списка отделов, вам представится Логотип отдела, Название отдела, Имя руководителя.
24. Нажмите на картинку отдела или его название.
25. Откроется карточка отдела с его названием, логотипом, описанием, именем руководителя и списком сотрудников этого отдела.

Ожидаемый результат:

1. Отделы создаются из панели администрата администратором;
2. При создании отдела сотрудники отдела добавляются (можно задать руководителя и выбрать сотрудников);
3. Созданный отдел можно удалять;
4. Отделы отображаются на витрине;
5. В карточке отдела на витрине можно увидеть список сотрудников отдела;
6. Новое приложение языкозависимое и меняет язык отображения при смене языка в общем меню магазина;
7. Всё работает без ошибок.

Баг-репорт

Шаги воспроизведения:

1. Зайти в клиентсктую часть магазина "Витрина";
2. Вверхнем правом углу экрана нажмите "Мой профиль";
3. Из выпавшего списка, нажмите на надпись "Отделы";
4. Нажмите на картинку отдела или его название;
5. На странице карточка отдела нажимаем по ссылке "Отделы" в строке "Главная/Отделы";
6. Фактический результат: Открывается страница с 404 ошибкой;
7. Ожидаемый результат: Открывается страница из отображенного плиткой списка отделов.

Среда

    CS-Cart 4.15.1:SP2;
    Web server apache2;
    Интерпритатор PHP7.4;
    База данных MySQL.
    ПО: Ubuntu 20.04;